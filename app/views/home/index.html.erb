<!DOCTYPE html>
<html>
<head>
  <title>Home</title>
  
<h1>Home#index</h1>
<h2>Generated Imagination</h2>

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
</head>
<body>
  <header>
    <nav>
      <% if user_signed_in? %>
        <span>こんにちは、<%= current_user.nickname %>さん</span>
        <%= link_to 'ログアウト', destroy_user_session_path, method: :delete %>
      <% else %>
        <%= link_to 'ログイン', new_user_session_path %>
        <%= link_to '新規登録', new_user_registration_path %>
      <% end %>
    </nav>
  </header>

  <main>
    <h1>ホーム画面</h1>

 <%= form_with model: @joke, local: true, url: jokes_path do |form| %>
      <div class="field">
        <%= form.label :category_id, "分野" %>
        <%= form.collection_select :category_id, Category.all, :id, :name %>
      </div>

      <div class="field">
        <%= form.label :input_text1, "言葉1" %>
        <%= form.text_field :input_text1 %>
      </div>

      <div class="field">
        <%= form.label :input_text2, "言葉2" %>
        <%= form.text_field :input_text2 %>
      </div>

      <div class="actions">
        <%= form.submit "生成" %>
      </div>
    <% end %>

    <% if @jokes.any? %>
      <ul>
        <% @jokes.each do |joke| %>
          <li>
            <p><%= joke.generated_joke %></p>
            <% if joke.generated_image_url.present? %>
              <%= image_tag joke.generated_image_url, alt: "Generated Image" %>
            <% end %>
          </li>
        <% end %>
      </ul>
    <% end %>
  </main>
</body>
</html>